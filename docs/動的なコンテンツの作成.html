<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 動的なコンテンツの作成 | rmdja による多様な形式の日本語技術文書の作成</title>
  <meta name="description" content="bookdown でまともな日本語文書を作る資料" />
  <meta name="generator" content="bookdown 0.20.6 and GitBook 2.6.7" />

  <meta property="og:title" content="4 動的なコンテンツの作成 | rmdja による多様な形式の日本語技術文書の作成" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://bookdown.org/john/awesome/" />
  <meta property="og:image" content="https://bookdown.org/john/awesome/img/Johannes_Gutenberg.jpg" />
  <meta property="og:description" content="bookdown でまともな日本語文書を作る資料" />
  <meta name="github-repo" content="Gedevan-Aleksizde/rmdja" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 動的なコンテンツの作成 | rmdja による多様な形式の日本語技術文書の作成" />
  
  <meta name="twitter:description" content="bookdown でまともな日本語文書を作る資料" />
  <meta name="twitter:image" content="https://bookdown.org/john/awesome/img/Johannes_Gutenberg.jpg" />

<meta name="author" content="Katagiri, Satoshi (ill-identified)" />


<meta name="date" content="2020-10-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="touch-icon.png" />
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="静的なコンテンツの作成.html"/>
<link rel="next" href="相互参照と引用.html"/>
<script src="libs/header-attrs-2.4/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.2/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="styles/css/style.css" type="text/css" />
<link rel="stylesheet" href="styles/css/toc.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="index.html">Top</a></li>
<li class="divider"></li>
<li class="part"><span><b>I イントロダクション</b></span></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>序文</a></li>
<li class="chapter" data-level="" data-path="本稿の目標.html"><a href="本稿の目標.html"><i class="fa fa-check"></i>本稿の目標</a>
<ul>
<li class="chapter" data-level="" data-path="本稿の目標.html"><a href="本稿の目標.html#既存のフォーマットとの違い"><i class="fa fa-check"></i>既存のフォーマットとの違い</a></li>
<li class="chapter" data-level="" data-path="本稿の目標.html"><a href="本稿の目標.html#昔話あるいは既存資料との違い"><i class="fa fa-check"></i>昔話あるいは既存資料との違い</a></li>
<li class="chapter" data-level="" data-path="本稿の目標.html"><a href="本稿の目標.html#想定読者"><i class="fa fa-check"></i>想定読者</a></li>
<li class="chapter" data-level="" data-path="本稿の目標.html"><a href="本稿の目標.html#r-markdown-ユーザ向けのメリット"><i class="fa fa-check"></i>R Markdown ユーザ向けのメリット</a></li>
</ul></li>
<li class="part"><span><b>II 最低限のチュートリアル</b></span></li>
<li class="chapter" data-level="1" data-path="quick-start.html"><a href="quick-start.html"><i class="fa fa-check"></i><b>1</b> クイックスタート</a></li>
<li class="chapter" data-level="2" data-path="下準備.html"><a href="下準備.html"><i class="fa fa-check"></i><b>2</b> 下準備</a>
<ul>
<li class="chapter" data-level="2.1" data-path="下準備.html"><a href="下準備.html#より丁寧なインストール解説"><i class="fa fa-check"></i><b>2.1</b> より丁寧なインストール解説</a></li>
<li class="chapter" data-level="2.2" data-path="下準備.html"><a href="下準備.html#書籍形式のビルド操作"><i class="fa fa-check"></i><b>2.2</b> 書籍形式のビルド操作</a></li>
</ul></li>
<li class="part"><span><b>III R Markdown と Bookdown の基本機能</b></span></li>
<li class="chapter" data-level="" data-path="このパートの概要.html"><a href="このパートの概要.html"><i class="fa fa-check"></i>このパートの概要</a></li>
<li class="chapter" data-level="3" data-path="静的なコンテンツの作成.html"><a href="静的なコンテンツの作成.html"><i class="fa fa-check"></i><b>3</b> 静的なコンテンツの作成</a>
<ul>
<li class="chapter" data-level="3.1" data-path="静的なコンテンツの作成.html"><a href="静的なコンテンツの作成.html#markdown-の基本構文"><i class="fa fa-check"></i><b>3.1</b> Markdown の基本構文</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="静的なコンテンツの作成.html"><a href="静的なコンテンツの作成.html#インラインでの書式変更"><i class="fa fa-check"></i><b>3.1.1</b> インラインでの書式変更</a></li>
<li class="chapter" data-level="3.1.2" data-path="静的なコンテンツの作成.html"><a href="静的なコンテンツの作成.html#ブロック要素"><i class="fa fa-check"></i><b>3.1.2</b> ブロック要素</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="静的なコンテンツの作成.html"><a href="静的なコンテンツの作成.html#markdown-を使った図表の挿入"><i class="fa fa-check"></i><b>3.2</b> Markdown を使った図表の挿入</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="静的なコンテンツの作成.html"><a href="静的なコンテンツの作成.html#コメントアウト"><i class="fa fa-check"></i><b>3.2.1</b> コメントアウト</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="静的なコンテンツの作成.html"><a href="静的なコンテンツの作成.html#数式"><i class="fa fa-check"></i><b>3.3</b> 数式</a></li>
<li class="chapter" data-level="3.4" data-path="静的なコンテンツの作成.html"><a href="静的なコンテンツの作成.html#カスタムブロック"><i class="fa fa-check"></i><b>3.4</b> カスタムブロック</a></li>
<li class="chapter" data-level="3.5" data-path="静的なコンテンツの作成.html"><a href="静的なコンテンツの作成.html#脚注"><i class="fa fa-check"></i><b>3.5</b> 脚注</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="動的なコンテンツの作成.html"><a href="動的なコンテンツの作成.html"><i class="fa fa-check"></i><b>4</b> 動的なコンテンツの作成</a>
<ul>
<li class="chapter" data-level="4.1" data-path="動的なコンテンツの作成.html"><a href="動的なコンテンツの作成.html#プログラムチャンク"><i class="fa fa-check"></i><b>4.1</b> プログラムチャンク</a></li>
<li class="chapter" data-level="4.2" data-path="動的なコンテンツの作成.html"><a href="動的なコンテンツの作成.html#プログラムで数式を生成する"><i class="fa fa-check"></i><b>4.2</b> プログラムで数式を生成する</a></li>
<li class="chapter" data-level="4.3" data-path="動的なコンテンツの作成.html"><a href="動的なコンテンツの作成.html#プログラムを使った図の挿入"><i class="fa fa-check"></i><b>4.3</b> プログラムを使った図の挿入</a></li>
<li class="chapter" data-level="4.4" data-path="動的なコンテンツの作成.html"><a href="動的なコンテンツの作成.html#todo-図のレイアウト設定"><i class="fa fa-check"></i><b>4.4</b> TODO: 図のレイアウト設定</a></li>
<li class="chapter" data-level="4.5" data-path="動的なコンテンツの作成.html"><a href="動的なコンテンツの作成.html#r-プログラムを使った表の装飾"><i class="fa fa-check"></i><b>4.5</b> R プログラムを使った表の装飾</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="相互参照と引用.html"><a href="相互参照と引用.html"><i class="fa fa-check"></i><b>5</b> 相互参照と引用</a>
<ul>
<li class="chapter" data-level="5.1" data-path="相互参照と引用.html"><a href="相互参照と引用.html#crossref"><i class="fa fa-check"></i><b>5.1</b> 相互参照</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="相互参照と引用.html"><a href="相互参照と引用.html#図表や式へのアンカーリンク"><i class="fa fa-check"></i><b>5.1.1</b> 図表や式へのアンカーリンク</a></li>
<li class="chapter" data-level="5.1.2" data-path="相互参照と引用.html"><a href="相互参照と引用.html#表への相互参照"><i class="fa fa-check"></i><b>5.1.2</b> 表への相互参照</a></li>
<li class="chapter" data-level="5.1.3" data-path="相互参照と引用.html"><a href="相互参照と引用.html#章への相互参照"><i class="fa fa-check"></i><b>5.1.3</b> 章への相互参照</a></li>
<li class="chapter" data-level="5.1.4" data-path="相互参照と引用.html"><a href="相互参照と引用.html#特殊な相互参照"><i class="fa fa-check"></i><b>5.1.4</b> 特殊な相互参照</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="相互参照と引用.html"><a href="相互参照と引用.html#bibliography"><i class="fa fa-check"></i><b>5.2</b> 文献引用</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="相互参照と引用.html"><a href="相互参照と引用.html#文献引用のフォーマット設定"><i class="fa fa-check"></i><b>5.2.1</b> 文献引用のフォーマット設定</a></li>
<li class="chapter" data-level="5.2.2" data-path="相互参照と引用.html"><a href="相互参照と引用.html#pandoc-citeproc-と-csl"><i class="fa fa-check"></i><b>5.2.2</b> <code>pandoc-citeproc</code> と CSL</a></li>
<li class="chapter" data-level="5.2.3" data-path="相互参照と引用.html"><a href="相互参照と引用.html#biblatex"><i class="fa fa-check"></i><b>5.2.3</b> <code>biblatex</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="簡単なレイアウト変更.html"><a href="簡単なレイアウト変更.html"><i class="fa fa-check"></i><b>6</b> 簡単なレイアウト変更</a>
<ul>
<li class="chapter" data-level="6.1" data-path="簡単なレイアウト変更.html"><a href="簡単なレイアウト変更.html#html"><i class="fa fa-check"></i><b>6.1</b> HTML</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="簡単なレイアウト変更.html"><a href="簡単なレイアウト変更.html#フォント変更"><i class="fa fa-check"></i><b>6.1.1</b> フォント変更</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="簡単なレイアウト変更.html"><a href="簡単なレイアウト変更.html#pdf"><i class="fa fa-check"></i><b>6.2</b> PDF</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="簡単なレイアウト変更.html"><a href="簡単なレイアウト変更.html#フォント変更-1"><i class="fa fa-check"></i><b>6.2.1</b> フォント変更</a></li>
<li class="chapter" data-level="6.2.2" data-path="簡単なレイアウト変更.html"><a href="簡単なレイアウト変更.html#文書クラスの変更"><i class="fa fa-check"></i><b>6.2.2</b> 文書クラスの変更</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="rmdja-による文書作成支援機能.html"><a href="rmdja-による文書作成支援機能.html"><i class="fa fa-check"></i><b>7</b> <code>rmdja</code> による文書作成支援機能</a>
<ul>
<li class="chapter" data-level="7.0.1" data-path="rmdja-による文書作成支援機能.html"><a href="rmdja-による文書作成支援機能.html#クリエイティブコモンズの表記"><i class="fa fa-check"></i><b>7.0.1</b> クリエイティブ・コモンズの表記</a></li>
<li class="chapter" data-level="7.0.2" data-path="rmdja-による文書作成支援機能.html"><a href="rmdja-による文書作成支援機能.html#ルビ表記"><i class="fa fa-check"></i><b>7.0.2</b> ルビ表記</a></li>
</ul></li>
<li class="part"><span><b>IV 応用編</b></span></li>
<li class="chapter" data-level="" data-path="このパートについて.html"><a href="このパートについて.html"><i class="fa fa-check"></i>このパートについて</a></li>
<li class="chapter" data-level="8" data-path="advanced-graph.html"><a href="advanced-graph.html"><i class="fa fa-check"></i><b>8</b> 様々なグラフィックプログラムの埋め込み</a>
<ul>
<li class="chapter" data-level="8.1" data-path="advanced-graph.html"><a href="advanced-graph.html#tikz-を使う"><i class="fa fa-check"></i><b>8.1</b> <code>tikz</code> を使う</a></li>
<li class="chapter" data-level="8.2" data-path="advanced-graph.html"><a href="advanced-graph.html#asymptote-を使う"><i class="fa fa-check"></i><b>8.2</b> Asymptote を使う</a></li>
<li class="chapter" data-level="8.3" data-path="advanced-graph.html"><a href="advanced-graph.html#todo-その他のプログラム"><i class="fa fa-check"></i><b>8.3</b> TODO その他のプログラム</a></li>
<li class="chapter" data-level="8.4" data-path="advanced-graph.html"><a href="advanced-graph.html#todo-その他の-r-プログラム"><i class="fa fa-check"></i><b>8.4</b> TODO: その他の R プログラム</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="表の掲載.html"><a href="表の掲載.html"><i class="fa fa-check"></i><b>9</b> 表の掲載</a>
<ul>
<li class="chapter" data-level="9.1" data-path="表の掲載.html"><a href="表の掲載.html#texhtml-を出力する関数"><i class="fa fa-check"></i><b>9.1</b> TeX/HTML を出力する関数</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="文献引用.html"><a href="文献引用.html"><i class="fa fa-check"></i><b>10</b> 文献引用</a>
<ul>
<li class="chapter" data-level="10.1" data-path="文献引用.html"><a href="文献引用.html#を使う"><i class="fa fa-check"></i><b>10.1</b> (u)pBibTeX を使う</a></li>
<li class="chapter" data-level="10.2" data-path="文献引用.html"><a href="文献引用.html#todo-biblatex"><i class="fa fa-check"></i><b>10.2</b> TODO BibLaTeX</a></li>
<li class="chapter" data-level="10.3" data-path="文献引用.html"><a href="文献引用.html#todo-pandoc-citeproc"><i class="fa fa-check"></i><b>10.3</b> TODO: pandoc-citeproc</a></li>
<li class="chapter" data-level="10.4" data-path="文献引用.html"><a href="文献引用.html#todo-gt-パッケージ"><i class="fa fa-check"></i><b>10.4</b> TODO: <code>gt</code> パッケージ</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="文書タイプごとの解説.html"><a href="文書タイプごとの解説.html"><i class="fa fa-check"></i><b>11</b> 文書タイプごとの解説</a>
<ul>
<li class="chapter" data-level="11.1" data-path="文書タイプごとの解説.html"><a href="文書タイプごとの解説.html#プレゼンテーション資料の作成"><i class="fa fa-check"></i><b>11.1</b> プレゼンテーション資料の作成</a></li>
<li class="chapter" data-level="11.2" data-path="文書タイプごとの解説.html"><a href="文書タイプごとの解説.html#wip-卒業論文の作成"><i class="fa fa-check"></i><b>11.2</b> (WIP) 卒業論文の作成</a></li>
<li class="chapter" data-level="11.3" data-path="文書タイプごとの解説.html"><a href="文書タイプごとの解説.html#wip-小説の執筆"><i class="fa fa-check"></i><b>11.3</b> (WIP) 小説の執筆</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="webapp.html"><a href="webapp.html"><i class="fa fa-check"></i><b>12</b> TODO Web アプレットの挿入</a>
<ul>
<li class="chapter" data-level="12.0.1" data-path="webapp.html"><a href="webapp.html#todo-plotly"><i class="fa fa-check"></i><b>12.0.1</b> TODO: plotly</a></li>
<li class="chapter" data-level="12.0.2" data-path="webapp.html"><a href="webapp.html#todo-shiny"><i class="fa fa-check"></i><b>12.0.2</b> TODO: shiny</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="python.html"><a href="python.html"><i class="fa fa-check"></i><b>13</b> Python スクリプトの埋め込み</a></li>
<li class="part"><span><b>V 製本と多様な形式への対応</b></span></li>
<li class="chapter" data-level="14" data-path="製本方法の詳細.html"><a href="製本方法の詳細.html"><i class="fa fa-check"></i><b>14</b> 製本方法の詳細</a>
<ul>
<li class="chapter" data-level="14.1" data-path="製本方法の詳細.html"><a href="製本方法の詳細.html#ファイル構成"><i class="fa fa-check"></i><b>14.1</b> ファイル構成</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="製本方法の詳細.html"><a href="製本方法の詳細.html#output.yml"><i class="fa fa-check"></i><b>14.1.1</b> <code>_output.yml</code></a></li>
<li class="chapter" data-level="14.1.2" data-path="製本方法の詳細.html"><a href="製本方法の詳細.html#bookdown.yml"><i class="fa fa-check"></i><b>14.1.2</b> <code>_bookdown.yml</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="出力形式による表現の限界.html"><a href="出力形式による表現の限界.html"><i class="fa fa-check"></i><b>15</b> 出力形式による表現の限界</a>
<ul>
<li class="chapter" data-level="15.1" data-path="出力形式による表現の限界.html"><a href="出力形式による表現の限界.html#htmlとpdfで処理を場合分けする"><i class="fa fa-check"></i><b>15.1</b> HTMLとPDFで処理を場合分けする</a></li>
<li class="chapter" data-level="15.2" data-path="出力形式による表現の限界.html"><a href="出力形式による表現の限界.html#絵文字の出力"><i class="fa fa-check"></i><b>15.2</b> 絵文字の出力</a></li>
<li class="chapter" data-level="15.3" data-path="出力形式による表現の限界.html"><a href="出力形式による表現の限界.html#画像の保存形式"><i class="fa fa-check"></i><b>15.3</b> 画像の保存形式</a></li>
<li class="chapter" data-level="15.4" data-path="出力形式による表現の限界.html"><a href="出力形式による表現の限界.html#デフォルトの保存形式"><i class="fa fa-check"></i><b>15.4</b> デフォルトの保存形式</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="製本した文書を配布する.html"><a href="製本した文書を配布する.html"><i class="fa fa-check"></i><b>16</b> 製本した文書を配布する</a>
<ul>
<li class="chapter" data-level="16.1" data-path="製本した文書を配布する.html"><a href="製本した文書を配布する.html#wepページのホスティング"><i class="fa fa-check"></i><b>16.1</b> Wepページのホスティング</a></li>
<li class="chapter" data-level="16.2" data-path="製本した文書を配布する.html"><a href="製本した文書を配布する.html#todo-入稿するには"><i class="fa fa-check"></i><b>16.2</b> TODO: 入稿するには</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="製本した文書を配布する.html"><a href="製本した文書を配布する.html#トンボの表示"><i class="fa fa-check"></i><b>16.2.1</b> トンボの表示</a></li>
<li class="chapter" data-level="16.2.2" data-path="製本した文書を配布する.html"><a href="製本した文書を配布する.html#フォントの埋め込み"><i class="fa fa-check"></i><b>16.2.2</b> フォントの埋め込み</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>VI デバッグ</b></span></li>
<li class="chapter" data-level="17" data-path="製本時のエラーへの対処.html"><a href="製本時のエラーへの対処.html"><i class="fa fa-check"></i><b>17</b> 製本時のエラーへの対処</a>
<ul>
<li class="chapter" data-level="17.1" data-path="製本時のエラーへの対処.html"><a href="製本時のエラーへの対処.html#エラーがどのタイミングで発生したかを特定する"><i class="fa fa-check"></i><b>17.1</b> エラーがどのタイミングで発生したかを特定する</a></li>
<li class="chapter" data-level="17.2" data-path="製本時のエラーへの対処.html"><a href="製本時のエラーへの対処.html#yaml-フロントマターを確認する"><i class="fa fa-check"></i><b>17.2</b> YAML フロントマターを確認する</a></li>
<li class="chapter" data-level="17.3" data-path="製本時のエラーへの対処.html"><a href="製本時のエラーへの対処.html#pdf-の生成に失敗する場合"><i class="fa fa-check"></i><b>17.3</b> PDF の生成に失敗する場合</a></li>
</ul></li>
<li class="appendix"><span><b>補遺</b></span></li>
<li class="chapter" data-level="A" data-path="デフォルト値の自動調整.html"><a href="デフォルト値の自動調整.html"><i class="fa fa-check"></i><b>A</b> デフォルト値の自動調整</a>
<ul>
<li class="chapter" data-level="A.1" data-path="デフォルト値の自動調整.html"><a href="デフォルト値の自動調整.html#デフォルトのフォント"><i class="fa fa-check"></i><b>A.1</b> デフォルトのフォント</a></li>
<li class="chapter" data-level="A.2" data-path="デフォルト値の自動調整.html"><a href="デフォルト値の自動調整.html#チャンクのデフォルト設定"><i class="fa fa-check"></i><b>A.2</b> チャンクのデフォルト設定</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="pdf-の組版に関する細かい話.html"><a href="pdf-の組版に関する細かい話.html"><i class="fa fa-check"></i><b>B</b> PDF の組版に関する細かい話</a>
<ul>
<li class="chapter" data-level="B.1" data-path="pdf-の組版に関する細かい話.html"><a href="pdf-の組版に関する細かい話.html#画像の配置"><i class="fa fa-check"></i><b>B.1</b> 画像の配置</a></li>
<li class="chapter" data-level="B.2" data-path="pdf-の組版に関する細かい話.html"><a href="pdf-の組版に関する細かい話.html#取り消し線"><i class="fa fa-check"></i><b>B.2</b> 取り消し線</a></li>
<li class="chapter" data-level="B.3" data-path="pdf-の組版に関する細かい話.html"><a href="pdf-の組版に関する細かい話.html#todo-しかし英文で書きたい場合"><i class="fa fa-check"></i><b>B.3</b> TODO: しかし英文で書きたい場合</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="jecon-bst-の紹介.html"><a href="jecon-bst-の紹介.html"><i class="fa fa-check"></i><b>C</b> jecon.bst の紹介</a></li>
<li class="part"><span><b>VII 参考文献</b></span></li>
<li class="chapter" data-level="" data-path="参考文献.html"><a href="参考文献.html"><i class="fa fa-check"></i>参考文献</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="_blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"><code>rmdja</code> による多様な形式の日本語技術文書の作成</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="動的なコンテンツの作成" class="section level1" number="4">
<h1><span class="header-section-number">4</span> 動的なコンテンツの作成</h1>
<div id="プログラムチャンク" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> プログラムチャンク</h2>
<p>プログラムチャンクは, R Markdown 最大の特徴であり, R のソースコードや, その実行結果を Markdown に挿入できる. さらには <strong>R 以外の言語の動作も可能</strong>である. 順番が前後してしまったが, 定理などのカスタムブロックは本来はプログラムを入力するためのチャンクブロックであり, それを静的なテキストコンテンツの挿入に流用しているだけである.</p>
<p>以降は R で多くのユーザが頻繁に使うパッケージと, いくつかの技術文書作成に役に立つパッケージをインポートしている前提の説明とする. なお, <code>rmarkdown</code>, <code>bookdown</code> はチャンク内で特に読み込む必要がない.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb24-1"><a href="動的なコンテンツの作成.html#cb24-1"></a>pkgs &lt;-<span class="st"> </span><span class="kw">installed.packages</span>()</span>
<span id="cb24-2"><a href="動的なコンテンツの作成.html#cb24-2"></a><span class="cf">for</span> (p <span class="cf">in</span> <span class="kw">c</span>(<span class="st">&quot;tidyverse&quot;</span>, <span class="st">&quot;ggthemes&quot;</span>, <span class="st">&quot;equatiomatic&quot;</span>, <span class="st">&quot;tufte&quot;</span>, <span class="st">&quot;kableExtra&quot;</span>)) {</span>
<span id="cb24-3"><a href="動的なコンテンツの作成.html#cb24-3"></a>  <span class="cf">if</span> (<span class="op">!</span>p <span class="op">%in%</span><span class="st"> </span>pkgs) <span class="kw">install.packages</span>(p)</span>
<span id="cb24-4"><a href="動的なコンテンツの作成.html#cb24-4"></a>}</span>
<span id="cb24-5"><a href="動的なコンテンツの作成.html#cb24-5"></a><span class="cf">if</span> (<span class="op">!</span><span class="st">&quot;rmarkdown&quot;</span> <span class="op">%in%</span><span class="st"> </span>pkgs) remotes<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;rstudio/rmarkdown&quot;</span>)</span>
<span id="cb24-6"><a href="動的なコンテンツの作成.html#cb24-6"></a><span class="cf">if</span> (<span class="op">!</span><span class="st">&quot;bookdown&quot;</span> <span class="op">%in%</span><span class="st"> </span>pkgs) remotes<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&quot;rstudio/bookdown&quot;</span>)</span>
<span id="cb24-7"><a href="動的なコンテンツの作成.html#cb24-7"></a><span class="kw">require</span>(tidyverse)</span></code></pre></div>
<pre><code>Loading required package: tidyverse</code></pre>
<pre><code>─ Attaching packages ──────────────────── tidyverse 1.3.0 ─</code></pre>
<pre><code>✓ ggplot2 3.3.2     ✓ purrr   0.3.4
✓ tibble  3.0.3     ✓ dplyr   1.0.2
✓ tidyr   1.1.2     ✓ stringr 1.4.0
✓ readr   1.3.1     ✓ forcats 0.5.0</code></pre>
<pre><code>─ Conflicts ───────────────────── tidyverse_conflicts() ─
x dplyr::filter()     masks stats::filter()
x dplyr::group_rows() masks kableExtra::group_rows()
x dplyr::lag()        masks stats::lag()</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb29-1"><a href="動的なコンテンツの作成.html#cb29-1"></a><span class="kw">require</span>(ggthemes)</span></code></pre></div>
<pre><code>Loading required package: ggthemes</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb31-1"><a href="動的なコンテンツの作成.html#cb31-1"></a><span class="kw">require</span>(equatiomatic)</span></code></pre></div>
<pre><code>Loading required package: equatiomatic</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb33-1"><a href="動的なコンテンツの作成.html#cb33-1"></a><span class="kw">require</span>(kableExtra)</span></code></pre></div>
<p>このように, ログを掲載することもできる. これは再現性を重視する際に重宝するが, 一方で単に画像などの出力だけを掲載したい場合もあるだろう. あるいは, プログラムを解説するために<strong>プログラムは掲載するが実行しない</strong>, ということも必要になるかもしれない. <strong>プログラムと結果の表示/非表示はどちらも簡単に切り替え可能</strong>である. そのためには, チャンクオプションを指定する.</p>
<ul>
<li><code>echo</code>: プログラムを掲載するかどうか</li>
<li><code>message</code>: プログラム実行結果の標準出力を掲載するかどうか</li>
<li><code>warning</code>: プログラム実行結果の警告を掲載するかどうか</li>
<li><code>error</code>: プログラム実行結果のエラーを掲載するかどうか</li>
<li><code>eval</code>: 文書作成時にプログラムを実行するかどうか</li>
<li><code>include</code>: 文書作成時にプログラムを実行し, <strong>かつ掲載しない</strong>かどうか</li>
<li><code>results</code>: 出力をいつもの R の出力風にするか (<code>markup</code>), 隠すか (<code>"hide"</code>), 出力を区切らずまとめるか (<code>"hold"</code>), テキストをそのまま出力するか (<code>"asis"</code>). 最後はソースコードを動的に生成したい場合などに使う (後述).</li>
</ul>
<p>R の論理値は <code>TRUE</code>/<code>FALSE</code> または <code>T</code>/<code>F</code> と書く.</p>
<p>チャンクごとに個別に設定することも, デフォルトとして設定することもできる. 前者の場合, チャンクオプションは <code>{}</code> 内部にカンマ <code>,</code> で区切って書く. <code>r</code> は R で実行するという意味である.</p>
<pre><code>```{r [&lt;name&gt;], [&lt;options&gt;]}
...
```</code></pre>
<p>後者の場合, 以下のようなプログラムでデフォルト値を上書きできる.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb35-1"><a href="動的なコンテンツの作成.html#cb35-1"></a>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(</span>
<span id="cb35-2"><a href="動的なコンテンツの作成.html#cb35-2"></a>  <span class="dt">echo =</span> F,</span>
<span id="cb35-3"><a href="動的なコンテンツの作成.html#cb35-3"></a>  <span class="dt">message =</span> T,</span>
<span id="cb35-4"><a href="動的なコンテンツの作成.html#cb35-4"></a>  <span class="dt">warnings =</span> F,</span>
<span id="cb35-5"><a href="動的なコンテンツの作成.html#cb35-5"></a>  <span class="dt">error =</span> F</span>
<span id="cb35-6"><a href="動的なコンテンツの作成.html#cb35-6"></a>)</span></code></pre></div>
<p>などと書く. なおこのチャンクは <code>eval=F</code> を設定することで, 実行されることなくプログラムのみ掲載している. ただし, プログラムのみを掲載するなら, 以下のように Markdown の機能でも可能である. こちらの記法は <code>{}</code> がなくなっていることに注意する.</p>
<pre><code>```sh
echo Hello, Bookdown
```</code></pre>
<p><code>{}</code> ブロック内の値にはさらに R プログラムで与えることができる. この使い方は後の章で解説する.</p>
<p>これらのオプションがあるおかげでプログラムとその結果の再現を説明したい場合はソースコードも表示させたり, 回帰分析やシミュレーションの結果だけを掲載したい時は結果のみ表示したりできる. これが R Markdown のチャンクの強みである. 例えば Jupyter notebook/lab などは従来, コードセルと出力セルを自由に隠すことができなかった.</p>
<p>チャンクに使用できる言語は R だけではない. <strong>つまり Python なども使用できる</strong>. 以下で対応しているエンジンの一覧を表示できる.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb37-1"><a href="動的なコンテンツの作成.html#cb37-1"></a><span class="kw">names</span>(knitr<span class="op">::</span>knit_engines<span class="op">$</span><span class="kw">get</span>())</span></code></pre></div>
<pre><code> [1] &quot;awk&quot;         &quot;bash&quot;        &quot;coffee&quot;      &quot;gawk&quot;        &quot;groovy&quot;     
 [6] &quot;haskell&quot;     &quot;lein&quot;        &quot;mysql&quot;       &quot;node&quot;        &quot;octave&quot;     
[11] &quot;perl&quot;        &quot;psql&quot;        &quot;Rscript&quot;     &quot;ruby&quot;        &quot;sas&quot;        
[16] &quot;scala&quot;       &quot;sed&quot;         &quot;sh&quot;          &quot;stata&quot;       &quot;zsh&quot;        
[21] &quot;highlight&quot;   &quot;Rcpp&quot;        &quot;tikz&quot;        &quot;dot&quot;         &quot;c&quot;          
[26] &quot;cc&quot;          &quot;fortran&quot;     &quot;fortran95&quot;   &quot;asy&quot;         &quot;cat&quot;        
[31] &quot;asis&quot;        &quot;stan&quot;        &quot;block&quot;       &quot;block2&quot;      &quot;js&quot;         
[36] &quot;css&quot;         &quot;sql&quot;         &quot;go&quot;          &quot;python&quot;      &quot;julia&quot;      
[41] &quot;sass&quot;        &quot;scss&quot;        &quot;theorem&quot;     &quot;lemma&quot;       &quot;corollary&quot;  
[46] &quot;proposition&quot; &quot;conjecture&quot;  &quot;definition&quot;  &quot;example&quot;     &quot;exercise&quot;   
[51] &quot;proof&quot;       &quot;remark&quot;      &quot;solution&quot;   </code></pre>
<p>また, 新たにプログラムを追加することもできる. 詳細は RDG <a href="https://bookdown.org/yihui/rmarkdown/language-engines.html">Ch. 2.7 Other language engines</a> を参考に.</p>
<p>TODO: 他の言語のプログラムを実行する際の注意点</p>
</div>
<div id="プログラムで数式を生成する" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> プログラムで数式を生成する</h2>
<p>プログラムチャンクは, 単にプログラムの計算結果を埋め込むだけでなく, 静的なコンテンツを臨機応変に変更して出力させたり, あるいは手作業でやるには煩雑な加工処理を挟んでから表示させるのに役に立つ.</p>
<p>R のプログラムと組み合わせることで<strong>回帰分析の結果の数値をコピペすることなく数式で表示することができる</strong>. そのためには <a href="https://github.com/datalorax/equatiomatic"><code>equatiomatic</code></a> パッケージの <code>extract_eq()</code> を使う.</p>
<p>まずは, 回帰係数を記号で表現するタイプ. LaTeX 数式をそのまま出力するため, チャンクオプションに <code>results="asis"</code> を付ける必要があることに注意する.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb39-1"><a href="動的なコンテンツの作成.html#cb39-1"></a><span class="kw">data</span>(iris)</span>
<span id="cb39-2"><a href="動的なコンテンツの作成.html#cb39-2"></a>fit &lt;-<span class="st"> </span><span class="kw">lm</span>(Sepal.Length <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> iris)</span>
<span id="cb39-3"><a href="動的なコンテンツの作成.html#cb39-3"></a><span class="kw">extract_eq</span>(fit, <span class="dt">wrap =</span> T, <span class="dt">ital_vars =</span> T, <span class="dt">align_env =</span> <span class="st">&quot;aligned&quot;</span>)</span></code></pre></div>
<p><span class="math display">\[
\begin{aligned}
Sepal.Length &amp;= \alpha + \beta_{1}(Sepal.Width) + \beta_{2}(Petal.Length) + \beta_{3}(Petal.Width)\ + \\
&amp;\quad \beta_{4}(Species_{versicolor}) + \beta_{5}(Species_{virginica}) + \epsilon
\end{aligned}
\]</span></p>
<p>さらに <code>use_coef = T</code> で係数を推定結果の数値に置き換えた.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb40-1"><a href="動的なコンテンツの作成.html#cb40-1"></a><span class="kw">extract_eq</span>(fit, <span class="dt">wrap =</span> T, <span class="dt">ital_vars =</span> T, <span class="dt">use_coef =</span> T, <span class="dt">align_env =</span> <span class="st">&quot;aligned&quot;</span>)</span></code></pre></div>
<p><span class="math display">\[
\begin{aligned}
Sepal.Length &amp;= 2.17 + 0.5(Sepal.Width) + 0.83(Petal.Length) - 0.32(Petal.Width)\ - \\
&amp;\quad 0.72(Species_{versicolor}) - 1.02(Species_{virginica}) + \epsilon
\end{aligned}
\]</span></p>
<p><code>equatiomatic</code> パッケージは現時点では <code>lm</code> <code>glm</code> に対応しており, <code>lmer</code> への対応も進めているようだ.</p>
<p>TODO: この書き方だと PDF で付番できない</p>
</div>
<div id="プログラムを使った図の挿入" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> プログラムを使った図の挿入</h2>
<p>既に Markdown 記法による図表の挿入方法を紹介したが, プログラムチャンクを介して画像を読み込み表示させることもできる. まずは, R のプログラムで既存の画像ファイルを表示させる方法.</p>
<div class="figure" style="text-align: center"><span id="fig:includegraphic-example"></span>
<img src="img/Johannes_Gutenberg.jpg" alt="Johannes Gutenberg" width="50%" height="50%" />
<p class="caption">
図 4.1: Johannes Gutenberg
</p>
</div>
<p>もちろんのこと既存の画像だけでなく, データを読み込んでヒストグラムや散布図などを描いた結果を画像として掲載することもできる.</p>
<p>技術文書や学術論文では, 画像の上か下に「図1: XXXXX」のような<strong>キャプション</strong>を付けることが多い. 紙の書籍では絵本のように本文と図の順序を厳密に守るより, 余白を作らないよう図の掲載位置を調整する必要があるからだ.</p>
<p>プログラムチャンクにはこのキャプションを入力するオプション <code>fig.cap</code> があるため, <strong><code>plot()</code> 側でタイトルを付けないほうが良い</strong>. 例えば <code>ggplot2</code> パッケージの関数を使い以下のようなチャンクを書く<a href="#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a>.</p>
<pre><code>```{r plot-sample, echo=T, fig.cap=&quot;`ggplot2` によるグラフ&quot;}
data(&quot;diamonds&quot;)
diamonds &lt;- diamonds[sample(1:NROW(diamonds), size =), ]
ggplot(diamonds, aes(x=carat, y=price, color=clarity)) +
  geom_point() +
  labs( x = &quot;カラット数&quot;, y = &quot;価格&quot;) + scale_color_pander(name = &quot;クラリティ&quot;) +
  theme_classic(base_family = &quot;Noto Sans CJK JP&quot;) + theme(legend.position = &quot;bottom&quot;)
```</code></pre>
<p>実際の表示は図 <a href="動的なコンテンツの作成.html#fig:plot-sample">4.2</a> のようになる.</p>
<div class="figure"><span id="fig:plot-sample"></span>
<img src="main_files/figure-html/plot-sample-1.png" alt="`ggplot2` によるグラフ"  />
<p class="caption">
図 4.2: <code>ggplot2</code> によるグラフ
</p>
</div>
<p><code>ggplot2</code> 以外のパッケージや言語, たとえば <code>tikz</code> や <code>asymptote</code>, DOT言語も使用できる. これらは <a href="advanced-graph.html#advanced-graph">8</a> 章で紹介する.</p>
</div>
<div id="todo-図のレイアウト設定" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> TODO: 図のレイアウト設定</h2>
<p>PDF ならばフロート設定のため, 図が離れた位置に配置されることがある. そのため, 「図 <a href="動的なコンテンツの作成.html#fig:plot-sample">4.2</a>」 のような相互参照を使うと良いだろう. フロートを使うかどうかは, 後のセクションで解説する TODO</p>
<p>Rのグラフィックデバイスを使っている限り, 通常のRのコンソールと同じコードをチャンク内に書くだけで表示できる.</p>
<p>R のグラフィックデバイスではないとは, RGL や <code>plotly</code> など外部ライブラリに頼ったグラフ作成ツールのことである. 判断できない人は, RStudio 上で実行して, “Plots” ペーンに表示されたら R のグラフィックデバイス, “Viewer” ペーンに表示されたらそうでない, で覚えていただきたい. 後者を表示する方法は <a href="webapp.html#webapp">12</a> 章で後述する. R をこれまで使ったことがなく, それすらも何を言っているのか分からない, という場合は <code>ggplot2</code> を使ってもらう.</p>
<p>最後の <code>fig.cap=""</code> がキャプションである. ただし, どうも日本語キャプションを書いたあとに他のチャンクオプションを指定するとエラーになるようだ. よって <strong><code>fig.cap=</code> はオプションの末尾に書くべきである</strong>. また, <code>fig.cap=""</code> に数式や一部の特殊なテキストを直接入力することができない. この問題は相互参照について解説するセクション <a href="相互参照と引用.html#crossref">5.1</a> で詳細を述べる.</p>
<p><code>fig.cap</code> 以外のオプションはおそらく頻繁には変えないため, 冒頭でまとめて設定したほうが楽だろう.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb42-1"><a href="動的なコンテンツの作成.html#cb42-1"></a>knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(</span>
<span id="cb42-2"><a href="動的なコンテンツの作成.html#cb42-2"></a>  <span class="dt">fig.align =</span> <span class="st">&quot;center&quot;</span>,</span>
<span id="cb42-3"><a href="動的なコンテンツの作成.html#cb42-3"></a>  <span class="dt">fig.width =</span> <span class="fl">6.5</span>,</span>
<span id="cb42-4"><a href="動的なコンテンツの作成.html#cb42-4"></a>  <span class="dt">fig.height =</span> <span class="fl">4.5</span>,</span>
<span id="cb42-5"><a href="動的なコンテンツの作成.html#cb42-5"></a>  <span class="dt">out.width =</span> <span class="st">&quot;100%&quot;</span>,</span>
<span id="cb42-6"><a href="動的なコンテンツの作成.html#cb42-6"></a>  <span class="dt">out.height =</span> <span class="st">&quot;100%&quot;</span></span>
<span id="cb42-7"><a href="動的なコンテンツの作成.html#cb42-7"></a>)</span></code></pre></div>
<p>なお, これらは <code>rmdja</code> でのデフォルト値であるため, 実際にこの値をあえて記述する必要はない.</p>
<p>ここで, <code>fig.width</code> と <code>out.width</code> の違いも述べておく. <code>out.width</code>/<code>out.height</code> は表示する画像サイズの違いで, <code>fig.width</code>/<code>fig.height</code> はプログラムが出力した画像の保存サイズである. よって <code>ggplot2</code> などを使わず画像ファイルを貼り付けるだけの場合は <code>fig.*</code> は意味をなさない.</p>
</div>
<div id="r-プログラムを使った表の装飾" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> R プログラムを使った表の装飾</h2>
<p>Markdown 記法を使った表記は既に紹介した. しかしこれは表の数値を全て手動で書かなければならない. もちろんこれも R 内のデータを手書きなどせずとも表示できるし, テーブルのデザインもある程度自由に設定できる.</p>
<p>R Markdown のデフォルトでは R のコンソールと同様にテキストとして出力されるが, bookdown では異なるデザインで表示されている. これは <code>knitr</code>, <code>kableExtra</code> パッケージなどで事後処理をかけることで見やすいデザインの表に変換しているからである.</p>
<p>この方法はシンプルで使いやすいが, R はテーブル状のデータ処理に長けているため, 手動で数値を書くよりも簡単な方法がある.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb43-1"><a href="動的なコンテンツの作成.html#cb43-1"></a><span class="kw">data</span>(iris)</span>
<span id="cb43-2"><a href="動的なコンテンツの作成.html#cb43-2"></a><span class="kw">kable</span>(</span>
<span id="cb43-3"><a href="動的なコンテンツの作成.html#cb43-3"></a>  <span class="kw">head</span>(iris, <span class="dt">n =</span> <span class="dv">10</span>),</span>
<span id="cb43-4"><a href="動的なコンテンツの作成.html#cb43-4"></a>  <span class="dt">caption =</span> <span class="st">&quot;`knitr::kable()` で出力された (PDFではあまりかっこよくない) 表&quot;</span></span>
<span id="cb43-5"><a href="動的なコンテンツの作成.html#cb43-5"></a>)</span></code></pre></div>
<table>
<caption>
<span id="tab:display-dataframe-kable">表 4.1: </span><code>knitr::kable()</code> で出力された (PDFではあまりかっこよくない) 表
</caption>
<thead>
<tr>
<th style="text-align:right;">
Sepal.Length
</th>
<th style="text-align:right;">
Sepal.Width
</th>
<th style="text-align:right;">
Petal.Length
</th>
<th style="text-align:right;">
Petal.Width
</th>
<th style="text-align:left;">
Species
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
5.1
</td>
<td style="text-align:right;">
3.5
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.9
</td>
<td style="text-align:right;">
3.0
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.7
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
1.3
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
3.1
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
5.0
</td>
<td style="text-align:right;">
3.6
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
5.4
</td>
<td style="text-align:right;">
3.9
</td>
<td style="text-align:right;">
1.7
</td>
<td style="text-align:right;">
0.4
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
3.4
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.3
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
5.0
</td>
<td style="text-align:right;">
3.4
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.4
</td>
<td style="text-align:right;">
2.9
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.9
</td>
<td style="text-align:right;">
3.1
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
</tbody>
</table>
<p>こちらは関数内にキャプションを書く必要があり, チャンクオプションに指定する方法はない (表<a href="動的なコンテンツの作成.html#tab:display-dataframe-kable">4.1</a>).</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode numberSource r numberLines lineAnchors"><code class="sourceCode r"><span id="cb44-1"><a href="動的なコンテンツの作成.html#cb44-1"></a><span class="kw">data</span>(iris)</span>
<span id="cb44-2"><a href="動的なコンテンツの作成.html#cb44-2"></a><span class="kw">kable</span>(</span>
<span id="cb44-3"><a href="動的なコンテンツの作成.html#cb44-3"></a>  <span class="kw">head</span>(iris, <span class="dt">n =</span> <span class="dv">10</span>),</span>
<span id="cb44-4"><a href="動的なコンテンツの作成.html#cb44-4"></a>  <span class="dt">booktabs =</span> T,</span>
<span id="cb44-5"><a href="動的なコンテンツの作成.html#cb44-5"></a>  <span class="dt">caption =</span> <span class="st">&quot;奇数行を強調し, PDF では booktabs を利用&quot;</span></span>
<span id="cb44-6"><a href="動的なコンテンツの作成.html#cb44-6"></a>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">row_spec</span>(<span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="dt">by =</span> <span class="dv">2</span>), <span class="dt">background =</span> <span class="st">&quot;gray&quot;</span>)</span></code></pre></div>
<table>
<caption>
<span id="tab:display-dataframe-kable-2">表 4.2: </span>奇数行を強調し, PDF では booktabs を利用
</caption>
<thead>
<tr>
<th style="text-align:right;">
Sepal.Length
</th>
<th style="text-align:right;">
Sepal.Width
</th>
<th style="text-align:right;">
Petal.Length
</th>
<th style="text-align:right;">
Petal.Width
</th>
<th style="text-align:left;">
Species
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;background-color: gray !important;">
5.1
</td>
<td style="text-align:right;background-color: gray !important;">
3.5
</td>
<td style="text-align:right;background-color: gray !important;">
1.4
</td>
<td style="text-align:right;background-color: gray !important;">
0.2
</td>
<td style="text-align:left;background-color: gray !important;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.9
</td>
<td style="text-align:right;">
3.0
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;background-color: gray !important;">
4.7
</td>
<td style="text-align:right;background-color: gray !important;">
3.2
</td>
<td style="text-align:right;background-color: gray !important;">
1.3
</td>
<td style="text-align:right;background-color: gray !important;">
0.2
</td>
<td style="text-align:left;background-color: gray !important;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
3.1
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;background-color: gray !important;">
5.0
</td>
<td style="text-align:right;background-color: gray !important;">
3.6
</td>
<td style="text-align:right;background-color: gray !important;">
1.4
</td>
<td style="text-align:right;background-color: gray !important;">
0.2
</td>
<td style="text-align:left;background-color: gray !important;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
5.4
</td>
<td style="text-align:right;">
3.9
</td>
<td style="text-align:right;">
1.7
</td>
<td style="text-align:right;">
0.4
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;background-color: gray !important;">
4.6
</td>
<td style="text-align:right;background-color: gray !important;">
3.4
</td>
<td style="text-align:right;background-color: gray !important;">
1.4
</td>
<td style="text-align:right;background-color: gray !important;">
0.3
</td>
<td style="text-align:left;background-color: gray !important;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
5.0
</td>
<td style="text-align:right;">
3.4
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;background-color: gray !important;">
4.4
</td>
<td style="text-align:right;background-color: gray !important;">
2.9
</td>
<td style="text-align:right;background-color: gray !important;">
1.4
</td>
<td style="text-align:right;background-color: gray !important;">
0.2
</td>
<td style="text-align:left;background-color: gray !important;">
setosa
</td>
</tr>
<tr>
<td style="text-align:right;">
4.9
</td>
<td style="text-align:right;">
3.1
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:left;">
setosa
</td>
</tr>
</tbody>
</table>
<p>さらに, RCB の <a href="https://bookdown.org/yihui/rmarkdown-cookbook/kable.html">Ch. 10.1 The function <code>knitr::kable()</code></a> ではその他いろいろな書式設定を紹介している.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="10">
<li id="fn10"><p>なお, Rユーザーならば標準グラフィック関数である <code>plot()</code> 関数をご存知だろうが, 本稿では<strong>標準グラフィック関数の使用を推奨しない</strong>. 標準グラフィック関数のデバイスはもともと日本語フォントを想定しておらず, OSごとに使用できるフォントも異なるためで, 品質維持のためには使用させない方針とした. 工夫すれば標準グラフィック関数でも日本語を適切に出力できるが, <code>ggplot2</code> を使用したほうが簡単であることが多いため, 標準グラフィック関数の解説書を作る以外では使うべきでない.<a href="動的なコンテンツの作成.html#fnref10" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="静的なコンテンツの作成.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="相互参照と引用.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["linkedin", "vk", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": {
"link": "edit/master/rmdja/inst/resources/examples/bookdown/chapter/chapters/elemental.Rmd",
"text": "Edit"
},
"history": {
"link": "blob/master/rmdja/inst/resources/examples/bookdown/chapter/chapters/elemental.Rmd",
"text": null
},
"view": {
"link": "tree/rmdja/inst/resources/examples/bookdown/chapter/chapters/elemental.Rmd",
"text": null
},
"download": ["main.pdf", "main.epub", "main.mobi"],
"toc": {
"collapse": "none"
},
"toolbar": {
"position": "fixed"
},
"search": true,
"info": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
